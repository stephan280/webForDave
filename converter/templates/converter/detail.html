{% extends 'base.html' %}
{% block title %}Audio Details{% endblock %}
{% block content %}

<div class="row justify-content-center">
  <div class="col-md-8">
    {% if messages %}
      {% for message in messages %}
        <div class="alert alert-info">{{ message }}</div>
      {% endfor %}
    {% endif %}

    <div class="card shadow-sm p-4">
      <h3 class="mb-3">📝 Converted Text</h3>
      <pre class="p-3 bg-light rounded" style="white-space: pre-wrap;">{{ conversion.pasted_text }}</pre>

      {% if conversion.audio_file %}
        <hr />
        <h5 class="mt-4">🎧 Listen to Audio</h5>
        <audio controls class="w-100 mt-2 mb-3">
          <source src="{% url 'stream_audio' conversion.id %}" type="audio/mpeg">
          Your browser does not support audio playback.
        </audio>

        <div class="d-flex flex-column flex-sm-row gap-2">
          <a href="{{ conversion.audio_file.url }}" class="btn btn-outline-success w-100" download>
            ⬇️ Download Audio
          </a>
          <a href="{% url 'upload' %}" class="btn btn-primary w-100">
            🔁 Convert Another
          </a>
          <a href="{% url 'dashboard' %}" class="btn btn-outline-secondary w-100">
            📂 Back to Dashboard
          </a>
        </div>
      {% else %}
        <div class="alert alert-warning mt-4">⚠️ No audio was generated for this conversion.</div>
      {% endif %}
    </div>
  </div>
</div>

{% endblock %}
