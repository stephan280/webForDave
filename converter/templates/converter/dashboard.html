{% extends 'base.html' %}

{% block title %}Dashboard - ReadOut{% endblock %}

{% block content %}
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="fw-semibold">Your Conversions</h2>
    <a href="{% url 'upload' %}" class="btn btn-success">
       New Conversion
    </a>
  </div>

  {% if conversions %}
    <div class="row g-4">
      {% for item in conversions %}
        <div class="col-md-6 col-lg-4">
          <div class="card h-100">
            <div class="card-body">
              <p class="card-text text-muted" style="max-height: 100px; overflow: hidden;">
                {{ item.pasted_text|truncatechars:100 }}
              </p>
            </div>
            <div class="card-footer bg-white border-top-0 d-flex justify-content-between align-items-center">
              <a href="{% url 'conversion_detail' item.id %}" class="btn btn-sm btn-primary">Listen</a>
              <form method="POST" action="{% url 'delete_conversion' item.id %}" onsubmit="return confirm('Are you sure you want to delete this conversion?');">
                {% csrf_token %}
                <button type="submit" class="btn btn-sm">🗑️</button>
              </form>
            </div>
          </div>
        </div>
      {% endfor %}
    </div>
  {% else %}
    <div class="alert alert-info mt-4">
      You haven’t made any conversions yet. Click "New Conversion" to start!
    </div>
  {% endif %}
{% endblock %}
