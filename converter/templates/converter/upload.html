{% extends 'base.html' %}
{% load form_filters %}
{% block title %}Convert PDF or Text{% endblock %}

{% block content %}
<div class="row justify-content-center">
  <div class="col-md-8">
    <div class="card p-4 shadow-sm">
      <h3 class="mb-3">üìù Convert PDF or Paste Text</h3>
      <form method="post" enctype="multipart/form-data" id="uploadForm">
        {% csrf_token %}
        <div class="mb-3">
          {{ form.pdf_file|add_class:"form-control" }}
        </div>
        <div class="mb-3">
          {{ form.pasted_text|add_class:"form-control" }}
        </div>
        <div class="mb-3">
          {{ form.language|add_class:"form-select" }}
        </div>
        <button type="submit" class="btn btn-primary w-100">üéß Convert to Audio</button>
      </form>
    </div>
  </div>
</div>

<!-- Spinner Modal -->
<div class="modal fade" id="spinnerModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content bg-transparent border-0 shadow-none">
      <div class="modal-body text-center">
        <div class="spinner-border text-primary" style="width: 3rem; height: 3rem;" role="status"></div>
        <p class="mt-3 text-white bg-dark rounded p-2">Processing, please wait...</p>
      </div>
    </div>
  </div>
</div>

<!-- Bootstrap JS (already in base.html), add form submission trigger -->
<script>
  document.getElementById('uploadForm').addEventListener('submit', function () {
    var spinnerModal = new bootstrap.Modal(document.getElementById('spinnerModal'));
    spinnerModal.show();
  });
</script>
{% endblock %}
