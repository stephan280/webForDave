{% extends 'base.html' %}
{% load form_filters %}

{% block title %}Convert Text or PDF{% endblock %}

{% block content %}
<div class="row justify-content-center">
  <div class="col-md-8">
    <div class="card shadow-sm p-4">
      <h3 class="mb-4">ðŸŽ§ Convert Text or PDF to Audio</h3>

      <form method="post" enctype="multipart/form-data" id="convertForm">
        {% csrf_token %}

        <div class="mb-3">
          <label for="{{ form.pasted_text.id_for_label }}" class="form-label">Paste Text</label>
          {{ form.pasted_text|add_class:"form-control" }}
        </div>

        <div class="mb-3">
          <label for="{{ form.pdf_file.id_for_label }}" class="form-label">Upload PDF</label>
          {{ form.pdf_file|add_class:"form-control" }}
        </div>

        <div class="mb-3">
          <label for="{{ form.language.id_for_label }}" class="form-label">Select Language</label>
          {{ form.language|add_class:"form-select" }}
        </div>

        <button type="submit" class="btn btn-primary w-100" id="submitBtn">Convert</button>
      </form>

      <!-- Spinner -->
      <div id="loadingSpinner" class="text-center mt-4 d-none">
        <div class="spinner-border text-primary" role="status"></div>
        <p class="mt-2">Hold on... we're working on your audio ðŸ“¢</p>
      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
  document.getElementById("convertForm").addEventListener("submit", function () {
    document.getElementById("submitBtn").disabled = true;
    document.getElementById("loadingSpinner").classList.remove("d-none");
  });
</script>
{% endblock %}
